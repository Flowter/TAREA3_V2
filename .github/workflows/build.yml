run-name: Flujo Análisis 


on:
  push:
  workflow_dispatch:

#on:
#  push:
#    branches:
#      - main
#  pull_request:
#    types: [opened, synchronize, reopened] 

jobs:

#Clonar Repo Profe
  Clon:
    runs-on: self-hosted
    steps:
      - name: Clonar Repositorio
        uses: GuillaumeFalourd/clone-github-repo-action@v2.1
        with:
          depth: 1
          branch: 'feature'
          owner: 'DevSecOps-Ciclo-7'
          repository: 'final-lab'
      - name: Access cloned repository content
        run: |
          cp -r final-lab /home/ubuntu/
          ls -la
      
  
#  SAST:
#    uses: ./.github/workflows/SAST.yml
#    with:
#      run-name: "Análisis de Código"
#    secrets: inherit  

#  SCA:
#    needs: SAST
#    uses: ./.github/workflows/SCA.yml
#    with:
#      run-name: "Análisis de Vulnerabilidades"
#    secrets: inherit

#  AnalizeImageDocker:
#    #needs: SCA
#    uses: ./.github/workflows/AnalisaImagen.yml
#    with:
#      run-name: "Análisis de Seguridad de Imágen y Creación de Contenedor"
#    secrets: inherit

#  DeployDocker:
#    needs: AnalizeImageDocker
#    uses: ./.github/workflows/SubirImagen.yml
#    with:
#      run-name: "Crea y Sube Contenedor"
#    secrets: inherit

#  zap_scan:
#    needs: DeployDocker
#    uses: ./.github/workflows/zap_scan.yml
#    with:
#      run-name: "DAST - OWASP ZAP"
#    secrets: inherit
